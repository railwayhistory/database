# DE 1000.  Flensburg Weiche (ausschl) - Harrislee Grenze
#
let flwhag = path("path.de.1000");
let neufle = path("path.de.1040");

with detail = 3 {
    #--- Flensburg Weiche
    # 
    track(:first :station,
            neufle[:fws - 2.1dl, :fws - 2dl] << 0.5dt
        --  neufle[:fws, :fws + .1dl] << 2.5dt
    );
    track(:first :station, neufle[:fws - 1dl, :fws] << 1.5dt);
    track(:double :first :station,
            neufle[:fws, :flw.wr2] << 2dt
        ..  neufle[:flin, :apad] << 3dt
    );

    #--- Flensburg Weiche (ausschl) - Harrislee Grenze
    # 
    track(:double :first :cat,
            neufle[:apad, :apad + .1dl] << 3dt
        ..  flwhag[:fri - .5sw, :f]
    );

    marker(:de.abzw, flwhag[:fri] >> 0.5dt);

    with layer = -1 marker(:de.bf :removed, flwhag[:har] >> .5dt);
    slabel(:left :removed, flwhag[:har - .5ssw] << 2dt, "Harrislee");

    marker(:de.dirgr, flwhag[:hag] >> 0.5dt);
    marker(:statdt, flwhag[:hag] << 0.5dt);
    marker(:de.dirgr :left, flwhag[:hag] << 0.5dt);
    label(
        flwhag[:hag] << 5dt,
        hbox(
            :right :middle,
            vbox(:center :middle,
                span(:small, "DK"),
                hbar(0.3),
                span(:small, "DE")
            )
        )
    );
}

